<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Windows è¿›é˜¶æŒ‡å—ï¼šæ ¸å¿ƒæœºåˆ¶æ·±åº¦è§£æ</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        body {
            background-color: #0f172a;
            color: #e2e8f0;
            font-family: 'Noto Sans SC', sans-serif;
            overflow: hidden;
        }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        /* ä¾§è¾¹æ é€‰ä¸­æ€ */
        .nav-item.active {
            background: rgba(56, 189, 248, 0.1);
            border-left: 4px solid #38bdf8;
            color: #38bdf8;
        }

        /* æ¨¡æ‹Ÿç»ˆç«¯å…‰æ ‡ */
        .cursor-blink {
            animation: blink 1s step-end infinite;
        }
        @keyframes blink { 50% { opacity: 0; } }

        /* æ»šåŠ¨æ¡ */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #1e293b; }
        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 3px; }

        /* Windows çª—å£é£æ ¼æ»šåŠ¨æ¡ */
        .win-scroll::-webkit-scrollbar { width: 12px; }
        .win-scroll::-webkit-scrollbar-track { background: #2d2d2d; border-left: 1px solid #3e3e3e; }
        .win-scroll::-webkit-scrollbar-thumb { background: #666; border: 2px solid #2d2d2d; }
        .win-scroll::-webkit-scrollbar-thumb:hover { background: #888; }

        /* ä»»åŠ¡ç®¡ç†å™¨ä¸“ç”¨åŠ¨ç”» */
        @keyframes bounce-short {
            0%, 100% { transform: translate(-50%, -50%); }
            50% { transform: translate(-50%, -60%); }
        }
        .animate-hint {
            animation: bounce-short 2s infinite;
        }

        /* é©±åŠ¨æ¨¡æ‹Ÿï¼šåƒç´ åŒ–æ•ˆæœ */
        .pixelated-blur {
            filter: blur(8px) contrast(150%);
            transform: scale(1.1);
            transition: all 1s ease;
        }
        .clear-view {
            filter: blur(0) contrast(100%);
            transform: scale(1);
            transition: all 1s ease;
        }

        /* è“å±åŠ¨ç”» */
        @keyframes sad-face-zoom {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        .bsod-enter {
            animation: sad-face-zoom 0.5s cubic-bezier(0.18, 0.89, 0.32, 1.28) forwards;
        }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <nav class="top-nav">
        <span class="logo">CSå…¥é—¨ç§‘æ™®</span>
        <a href="index.html">é¦–é¡µ</a>
        <a href="è®¡ç®—æœºç¡¬ä»¶.html">è®¡ç®—æœºç¡¬ä»¶</a>
        <a href="è½¯ä»¶.html">è½¯ä»¶ä¸å·¥å…·</a>
        <a href="ç½‘ç»œ.html">è®¡ç®—æœºç½‘ç»œ</a>
        <a href="LLM.html">å¤§è¯­è¨€æ¨¡å‹</a>
        <a href="os.html" style="color: #38bdf8; background: rgba(56, 189, 248, 0.1);">æ“ä½œç³»ç»Ÿ</a>
        <a href="programming.html">ç¼–ç¨‹åŸºç¡€</a>
        <a href="mc.html" style="border-left: 1px solid rgba(255,255,255,0.1); padding-left: 15px; margin-left: 10px;">ğŸ® Minecraft CS</a>
    </nav>
    
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- 1. ç»ˆç«¯æ¨¡æ‹Ÿå™¨ (CMD vs PowerShell) ---
        const TerminalSection = () => {
            const [mode, setMode] = useState('cmd');
            const [output, setOutput] = useState([
                { text: "Microsoft Windows [ç‰ˆæœ¬ 10.0.19045.3693]", type: 'info' },
                { text: "(c) Microsoft Corporationã€‚ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚", type: 'info' },
                { text: "", type: 'empty' }
            ]);

            const runCommand = (cmdText) => {
                setOutput(prev => [...prev, { text: `C:\\Users\\Admin> ${cmdText}`, type: 'command' }]);
                
                setTimeout(() => {
                    if (cmdText === 'ping 8.8.8.8') {
                        const responses = [
                            "æ­£åœ¨ Ping 8.8.8.8 å…·æœ‰ 32 å­—èŠ‚çš„æ•°æ®:",
                            "æ¥è‡ª 8.8.8.8 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´=45ms TTL=116",
                            "æ¥è‡ª 8.8.8.8 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´=46ms TTL=116",
                            "Ping ç»Ÿè®¡ä¿¡æ¯: æ•°æ®åŒ…: å·²å‘é€ = 2ï¼Œå·²æ¥æ”¶ = 2ï¼Œä¸¢å¤± = 0 (0% ä¸¢å¤±)"
                        ];
                        responses.forEach((line, i) => {
                            setTimeout(() => setOutput(prev => [...prev, { text: line, type: 'result' }]), i * 500);
                        });
                    } else if (cmdText.includes('Get-ChildItem')) {
                        setOutput(prev => [...prev, 
                            { text: "ç›®å½•: C:\\Work\\Docs", type: 'result' },
                            { text: "Mode                 LastWriteTime         Length Name", type: 'result' },
                            { text: "----                 -------------         ------ ----", type: 'result' },
                            { text: "-a----        2024/5/20     14:23          1204  Report_2023.docx", type: 'result' },
                            { text: "-a----        2024/5/20     14:24          3521  Budget_2023.xlsx", type: 'result' },
                            { text: ">>> æ‰§è¡Œè‡ªåŠ¨åŒ–è„šæœ¬ï¼šæ­£åœ¨å°†æ–‡ä»¶åä¸­çš„ '2023' æ‰¹é‡æ›¿æ¢ä¸º '2024'...", type: 'success' },
                            { text: ">>> å®Œæˆï¼æ‰€æœ‰æ–‡ä»¶å·²æ›´æ–°ã€‚", type: 'success' }
                        ]);
                    }
                }, 300);
            };

            return (
                <div className="h-full flex flex-col gap-4">
                    <div className="flex gap-4 mb-2">
                        <button 
                            onClick={() => { setMode('cmd'); setOutput([{ text: "Microsoft Windows [ç‰ˆæœ¬ 10.0.19045]", type: 'info' }]); }}
                            className={`px-4 py-2 rounded font-mono text-sm transition-colors border ${mode === 'cmd' ? 'bg-gray-800 border-gray-500 text-white' : 'border-gray-700 text-gray-500'}`}
                        >
                            CMD (è€ç®¡å®¶)
                        </button>
                        <button 
                            onClick={() => { setMode('ps'); setOutput([{ text: "Windows PowerShell", type: 'info' }, { text: "ç‰ˆæƒæ‰€æœ‰ (C) Microsoft Corporationã€‚", type: 'info' }]); }}
                            className={`px-4 py-2 rounded font-mono text-sm transition-colors border ${mode === 'ps' ? 'bg-blue-900/50 border-blue-500 text-blue-200' : 'border-gray-700 text-gray-500'}`}
                        >
                            PowerShell (é­”æ³•æ£’)
                        </button>
                    </div>

                    <div className={`flex-1 rounded-lg p-4 font-mono text-sm overflow-y-auto border border-gray-700 shadow-inner ${mode === 'cmd' ? 'bg-black text-gray-300' : 'bg-[#012456] text-white'}`}>
                        {output.map((line, i) => (
                            <div key={i} className={`mb-1 ${line.type === 'success' ? 'text-green-400' : line.type === 'command' ? 'text-yellow-300' : ''}`}>
                                {line.text}
                            </div>
                        ))}
                        <div className="animate-pulse">_</div>
                    </div>
                     <div className="p-2 bg-gray-800 rounded border border-gray-700 text-xs text-gray-400">
                         ğŸ’¡ æç¤ºï¼šCMD é€‚åˆç®€å•çš„æ–‡ä»¶ç®¡ç†ï¼ŒPowerShell åˆ™æ˜¯ç³»ç»Ÿç®¡ç†å‘˜çš„è‡ªåŠ¨åŒ–ç¥å™¨ã€‚
                    </div>
                </div>
            );
        };

        // --- 2. æ–‡ä»¶ç³»ç»Ÿ (åˆ†åŒºã€ç›˜ç¬¦ä¸åˆ é™¤åŸç†) ---
        const FileSystemSection = () => {
            const [showExt, setShowExt] = useState(false);
            const [driveStatus, setDriveStatus] = useState('ready');
            const [progress, setProgress] = useState(0);

            // Deletion Lab State
            // 0: Init, 1: Created, 2: Deleted, 3: Overwritten
            const [delStep, setDelStep] = useState(0); 

            const startFormat = () => {
                if (driveStatus === 'formatting') return;
                setDriveStatus('formatting');
                setProgress(0);
                let p = 0;
                const interval = setInterval(() => {
                    p += 2;
                    setProgress(p);
                    if (p >= 100) {
                        clearInterval(interval);
                        setDriveStatus('empty');
                    }
                }, 50);
            };

            const resetDrive = () => {
                setDriveStatus('ready');
                setProgress(0);
            };
            
            return (
                <div className="space-y-6 h-full pr-2 overflow-y-auto win-scroll">
                    {/* 1. åˆ é™¤åŸç† (æ–°å¢) */}
                    <div className="bg-slate-800 p-5 rounded-lg border border-slate-700">
                        <h3 className="text-lg font-bold text-white mb-3 flex items-center gap-2">
                            <span className="text-red-400">ğŸ—‘ï¸</span> æ•°æ®åˆ é™¤ä¸æ¢å¤å®éªŒå®¤ <span className="text-xs bg-red-900/50 px-2 py-0.5 rounded text-red-200 ml-2">New!</span>
                        </h3>
                        <div className="flex flex-col gap-4">
                            <div className="text-xs text-gray-400">
                                å½“ä½ ç‚¹å‡»â€œåˆ é™¤â€å¹¶æ¸…ç©ºå›æ”¶ç«™æ—¶ï¼Œæ–‡ä»¶çœŸçš„æ¶ˆå¤±äº†å—ï¼Ÿè§‚å¯Ÿä¸‹é¢çš„ <strong>MFT (æ–‡ä»¶ç™»è®°è¡¨)</strong> å’Œ <strong>ç£ç›˜æ•°æ®åŒº</strong> çš„å˜åŒ–ã€‚
                            </div>
                            
                            <div className="flex gap-4 items-stretch">
                                {/* MFT æ¨¡æ‹Ÿ */}
                                <div className="w-1/3 bg-gray-900 border border-gray-600 rounded p-3 flex flex-col gap-2">
                                    <div className="text-xs font-bold text-blue-400 border-b border-gray-700 pb-1">MFT (ç™»è®°è¡¨)</div>
                                    {delStep === 0 && <div className="text-xs text-gray-500 italic">ç©ºé—²</div>}
                                    {(delStep === 1 || delStep === 2) && (
                                        <div className={`text-xs p-1 rounded border ${delStep === 1 ? 'bg-green-900/30 border-green-600 text-green-400' : 'bg-red-900/20 border-red-800 text-gray-500 line-through'}`}>
                                            ğŸ“„ secret.txt<br/>
                                            ğŸ“ Loc: 01-03
                                        </div>
                                    )}
                                    {delStep === 3 && (
                                        <div className="text-xs p-1 rounded border bg-yellow-900/30 border-yellow-600 text-yellow-400">
                                            ğŸ¬ movie.mp4<br/>
                                            ğŸ“ Loc: 01-04
                                        </div>
                                    )}
                                </div>

                                {/* ç£ç›˜æ‰‡åŒºæ¨¡æ‹Ÿ */}
                                <div className="flex-1 bg-gray-900 border border-gray-600 rounded p-3">
                                    <div className="text-xs font-bold text-gray-400 mb-2">ç‰©ç†ç£ç›˜æ‰‡åŒº (Physical Blocks)</div>
                                    <div className="flex gap-1">
                                        {[1,2,3,4,5,6].map(i => {
                                            let bg = "bg-gray-700"; // Empty
                                            let text = "";
                                            
                                            if (delStep === 1 && i <= 3) { bg = "bg-green-600"; text="DATA"; }
                                            if (delStep === 2 && i <= 3) { bg = "bg-green-900/40 border border-green-800 border-dashed text-gray-500"; text="DATA"; } // Deleted but data remains
                                            if (delStep === 3 && i <= 4) { bg = "bg-yellow-600"; text="NEW"; } // Overwritten

                                            return (
                                                <div key={i} className={`h-12 flex-1 rounded flex items-center justify-center text-[10px] font-mono transition-all duration-500 ${bg}`}>
                                                    {text}
                                                </div>
                                            )
                                        })}
                                    </div>
                                    <div className="mt-2 text-xs h-8 text-gray-300 leading-tight">
                                        {delStep === 0 && "ç¡¬ç›˜æ˜¯ç©ºçš„ã€‚"}
                                        {delStep === 1 && "æ–‡ä»¶å·²å†™å…¥ã€‚ç™»è®°è¡¨è®°å½•äº†ä½ç½®ï¼Œæ‰‡åŒºå­˜å…¥äº†æ•°æ®ã€‚"}
                                        {delStep === 2 && <span className="text-green-400">å…³é”®æ—¶åˆ»ï¼ç™»è®°è¡¨åˆ é™¤äº†è®°å½•ï¼Œæ ‡è®°æ‰‡åŒºä¸ºâ€œç©ºé—²â€ï¼Œä½†<strong>æ•°æ®å¹¶æœªè¢«æŠ¹é™¤</strong>ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆèƒ½æ¢å¤ï¼</span>}
                                        {delStep === 3 && <span className="text-red-400">æ–°æ–‡ä»¶å†™å…¥å¹¶è¦†ç›–äº†æ—§ä½ç½®ã€‚æ­¤æ—¶æ—§æ•°æ®å½»åº•æŸåï¼Œæ— æ³•æ¢å¤ã€‚</span>}
                                    </div>
                                </div>
                            </div>

                            <div className="flex gap-2">
                                <button onClick={() => setDelStep(1)} disabled={delStep !== 0} className="px-3 py-1 bg-blue-600 disabled:opacity-30 disabled:cursor-not-allowed rounded text-xs text-white">1. åˆ›å»ºæ–‡ä»¶</button>
                                <button onClick={() => setDelStep(2)} disabled={delStep !== 1} className="px-3 py-1 bg-red-600 disabled:opacity-30 disabled:cursor-not-allowed rounded text-xs text-white">2. åˆ é™¤æ–‡ä»¶</button>
                                <button onClick={() => setDelStep(3)} disabled={delStep !== 2} className="px-3 py-1 bg-yellow-600 disabled:opacity-30 disabled:cursor-not-allowed rounded text-xs text-black font-bold">3. å†™å…¥æ–°æ–‡ä»¶ (è¦†ç›–)</button>
                                <button onClick={() => setDelStep(0)} className="px-3 py-1 bg-gray-600 rounded text-xs text-white ml-auto">é‡ç½®</button>
                            </div>
                        </div>
                    </div>

                    {/* 2. æ‰©å±•åå®éªŒ */}
                    <div className="bg-slate-800 p-5 rounded-lg border border-slate-700">
                        <div className="flex items-center justify-between mb-3">
                            <div>
                                <h3 className="text-lg font-bold text-white">2. æ‰©å±•åæ©æŠ¤å®éªŒ</h3>
                            </div>
                            <label className="flex items-center cursor-pointer">
                                <div className="mr-3 text-xs font-medium text-gray-300">
                                    {showExt ? "æ‰©å±•å: [å·²æ˜¾ç¤º]" : "æ‰©å±•å: [å·²éšè—]"}
                                </div>
                                <div className="relative">
                                    <input type="checkbox" className="sr-only" checked={showExt} onChange={() => setShowExt(!showExt)} />
                                    <div className={`block w-10 h-6 rounded-full transition-colors ${showExt ? 'bg-green-500' : 'bg-gray-600'}`}></div>
                                    <div className={`dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${showExt ? 'transform translate-x-4' : ''}`}></div>
                                </div>
                            </label>
                        </div>
                        <div className="grid grid-cols-2 gap-4">
                            <div className={`p-3 rounded-lg border flex items-center gap-3 transition-colors relative overflow-hidden ${showExt ? 'bg-red-900/20 border-red-500' : 'bg-slate-900 border-slate-700'}`}>
                                {showExt && <div className="absolute top-0 right-0 bg-red-600 text-white text-[10px] px-1">VIRUS</div>}
                                <div className="text-3xl">ğŸ–¼ï¸</div>
                                <div>
                                    <div className="text-white font-mono text-sm">
                                        ç¾å¥³ç…§ç‰‡{showExt ? <span className="text-red-400 font-bold bg-red-900/30 px-1 rounded">.exe</span> : <span className="text-gray-400 opacity-0">.jpg</span>}
                                    </div>
                                    <div className="text-[10px] text-gray-500 mt-1">
                                        {showExt ? "ç±»å‹ï¼šåº”ç”¨ç¨‹åº (.exe)" : "ç±»å‹ï¼šJPG æ–‡ä»¶"}
                                    </div>
                                </div>
                            </div>
                            <div className="bg-slate-900 p-3 rounded-lg border border-slate-700 flex items-center gap-3">
                                <div className="text-3xl">ğŸ“„</div>
                                <div>
                                    <div className="text-white font-mono text-sm">
                                        å·¥ä½œæŠ¥å‘Š{showExt && <span className="text-yellow-400 font-bold bg-yellow-900/30 px-1 rounded">.docx</span>}
                                    </div>
                                    <div className="text-[10px] text-gray-500 mt-1">ç±»å‹ï¼šWord æ–‡æ¡£</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* 3. åˆ†åŒºä¸æ ¼å¼åŒ– */}
                    <div className="bg-slate-800 p-5 rounded-lg border border-slate-700">
                        <h3 className="text-lg font-bold text-white mb-4 flex items-center gap-2">
                            <span className="text-2xl">ğŸ’½</span> ç¡¬ç›˜åˆ†åŒºä¸æ ¼å¼åŒ–
                        </h3>
                        <div className="mb-4">
                            <div className="flex h-16 w-full rounded-lg overflow-hidden border-2 border-gray-600 font-mono text-xs shadow-lg">
                                <div className="w-1/3 bg-blue-900/80 flex flex-col items-center justify-center text-white border-r-2 border-gray-800 hover:bg-blue-800">
                                    <span className="font-bold text-lg">C:</span>
                                    <span className="text-blue-200">ç³»ç»Ÿ</span>
                                </div>
                                <div className="flex-1 bg-gray-700/50 flex flex-col items-center justify-center text-gray-200 relative">
                                    {driveStatus === 'formatting' ? (
                                        <div className="w-full px-8">
                                            <div className="text-center mb-1 text-yellow-400 font-bold">æ ¼å¼åŒ–ä¸­... {progress}%</div>
                                            <div className="w-full bg-gray-800 h-2 rounded-full overflow-hidden border border-gray-600">
                                                <div className="bg-yellow-400 h-full transition-all duration-100 ease-linear" style={{width: `${progress}%`}}></div>
                                            </div>
                                        </div>
                                    ) : driveStatus === 'empty' ? (
                                        <div className="flex flex-col items-center">
                                            <span className="font-bold text-lg text-gray-300">D:</span>
                                            <span className="text-green-400 font-bold">ç©ºé—²</span>
                                        </div>
                                    ) : (
                                        <>
                                            <span className="font-bold text-lg">D:</span>
                                            <span>æ•°æ®</span>
                                        </>
                                    )}
                                </div>
                            </div>
                        </div>

                        <div className="flex justify-end gap-2">
                            <button 
                                onClick={startFormat}
                                disabled={driveStatus !== 'ready'}
                                className={`px-4 py-2 rounded font-bold text-xs transition-all ${driveStatus === 'ready' ? 'bg-red-600 hover:bg-red-500 text-white' : 'bg-gray-700 text-gray-500 cursor-not-allowed'}`}
                            >
                                {driveStatus === 'formatting' ? "â³" : "ğŸ§¹ æ ¼å¼åŒ– D ç›˜"}
                            </button>
                            {driveStatus === 'empty' && (
                                <button onClick={resetDrive} className="text-xs text-blue-400 hover:underline px-2">é‡ç½®</button>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        // --- 3. è·¯å¾„å®éªŒå®¤ (æ–°å¢ - é‡ç‚¹è®²è§£ä¸ºä»€ä¹ˆä¸èƒ½éšä¾¿æŒªåŠ¨) ---
        const PathSection = () => {
            const [pathMode, setPathMode] = useState('abs');
            const [gameFolderState, setGameFolderState] = useState('installed'); // installed, moved
            const [systemLog, setSystemLog] = useState([]);

            const addToLog = (msg, type='info') => {
                setSystemLog(prev => [...prev, {msg, type}]);
            };

            const runGame = () => {
                if (gameFolderState === 'installed') {
                    addToLog("æ­£åœ¨å¯åŠ¨ 'Game.exe'...", 'info');
                    addToLog("è¯»å–æ³¨å†Œè¡¨è·¯å¾„: C:\\Program Files\\Game... æˆåŠŸ", 'success');
                    addToLog("åŠ è½½ config.ini... æˆåŠŸ", 'success');
                    addToLog(">>> æ¸¸æˆå¯åŠ¨æˆåŠŸï¼ğŸ®", 'success');
                } else {
                    addToLog("æ­£åœ¨å¯åŠ¨å¿«æ·æ–¹å¼...", 'info');
                    addToLog("é”™è¯¯: æ‰¾ä¸åˆ°ç›®æ ‡ 'C:\\Program Files\\Game\\Game.exe'", 'error');
                    addToLog("è¯»å–æ³¨å†Œè¡¨... è·¯å¾„æŒ‡å‘ä¸å­˜åœ¨çš„ä½ç½®", 'error');
                    addToLog(">>> å¯åŠ¨å¤±è´¥: ç³»ç»Ÿæ‰¾ä¸åˆ°æŒ‡å®šçš„æ–‡ä»¶ã€‚", 'error');
                }
            };

            const moveFolder = () => {
                if (gameFolderState === 'installed') {
                    setGameFolderState('moved');
                    addToLog("ç”¨æˆ·æ“ä½œ: å°† 'Game' æ–‡ä»¶å¤¹å‰ªåˆ‡ç²˜è´´åˆ°äº† 'D:\\Downloads'", 'warning');
                    addToLog("è­¦å‘Š: æ³¨å†Œè¡¨ã€å¿«æ·æ–¹å¼ã€é…ç½®æ–‡ä»¶å¹¶æœªæ›´æ–°ï¼", 'warning');
                } else {
                    setGameFolderState('installed');
                    addToLog("ç”¨æˆ·æ“ä½œ: å°†æ–‡ä»¶å¤¹ç§»å›åŸä½", 'success');
                    addToLog("æ¢å¤æ­£å¸¸ã€‚", 'success');
                }
            };

            return (
                <div className="h-full flex flex-col gap-6">
                    {/* Part 1: è·¯å¾„ç±»å‹ */}
                    <div className="bg-slate-800 rounded-lg p-5 border border-slate-700">
                        <h3 className="text-lg font-bold text-white mb-3 flex items-center gap-2">
                            <span className="text-yellow-400">ğŸ“‚</span> è·¯å¾„ (Path) åŸºç¡€
                        </h3>
                        <div className="flex gap-2 mb-4">
                            <button onClick={() => setPathMode('abs')} className={`px-3 py-1 rounded text-xs transition-colors ${pathMode === 'abs' ? 'bg-blue-600 text-white' : 'bg-gray-700 text-gray-400'}`}>ç»å¯¹è·¯å¾„</button>
                            <button onClick={() => setPathMode('rel')} className={`px-3 py-1 rounded text-xs transition-colors ${pathMode === 'rel' ? 'bg-purple-600 text-white' : 'bg-gray-700 text-gray-400'}`}>ç›¸å¯¹è·¯å¾„</button>
                            <button onClick={() => setPathMode('unc')} className={`px-3 py-1 rounded text-xs transition-colors ${pathMode === 'unc' ? 'bg-green-600 text-white' : 'bg-gray-700 text-gray-400'}`}>UNC (ç½‘ç»œ)</button>
                        </div>
                        <div className="bg-black/50 p-4 rounded border border-gray-600 font-mono text-sm">
                            {pathMode === 'abs' && (
                                <div>
                                    <span className="text-blue-400">C:</span><span className="text-gray-300">\Users\Admin\Music\</span><span className="text-green-400">Song.mp3</span>
                                    <div className="mt-2 text-xs text-gray-400 border-t border-gray-700 pt-2">
                                        ğŸ“ å°±åƒç»çº¬åº¦åæ ‡ã€‚æ— è®ºä½ åœ¨å“ªé‡Œï¼Œè¿™ä¸ªåœ°å€éƒ½æŒ‡å‘åŒä¸€ä¸ªå”¯ä¸€çš„æˆ¿é—´ã€‚
                                    </div>
                                </div>
                            )}
                            {pathMode === 'rel' && (
                                <div>
                                    <span className="text-purple-400">..\</span><span className="text-gray-300">Pictures\</span><span className="text-green-400">Image.jpg</span>
                                    <div className="mt-2 text-xs text-gray-400 border-t border-gray-700 pt-2">
                                        ğŸ“ å°±åƒæŒ‡è·¯ï¼šâ€œå‡ºé—¨å·¦è½¬â€ã€‚`..` ä»£è¡¨å‘ä¸Šä¸€çº§ã€‚å¦‚æœä½ æ¢äº†ä½ç½®ï¼Œè¿™ä¸ªæŒ‡å¼•å¯èƒ½å°±å¤±æ•ˆäº†ã€‚
                                    </div>
                                </div>
                            )}
                            {pathMode === 'unc' && (
                                <div>
                                    <span className="text-green-400">\\NasServer</span><span className="text-gray-300">\Public\Files\</span><span className="text-yellow-400">Setup.exe</span>
                                    <div className="mt-2 text-xs text-gray-400 border-t border-gray-700 pt-2">
                                        ğŸ“ ç½‘ç»œè·¯å¾„ã€‚ä¸éœ€è¦ç›˜ç¬¦ï¼Œç›´æ¥è®¿é—®å±€åŸŸç½‘å†…çš„å…¶ä»–ç”µè„‘èµ„æºã€‚
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>

                    {/* Part 2: ä¸ºä»€ä¹ˆä¸èƒ½éšä¾¿ç§»åŠ¨ */}
                    <div className="flex-1 bg-slate-800 rounded-lg p-5 border border-slate-700 flex flex-col">
                        <h3 className="text-lg font-bold text-white mb-3 flex items-center gap-2">
                            <span className="text-red-400">ğŸš«</span> ä¸ºä»€ä¹ˆå®‰è£…å¥½çš„è½¯ä»¶ä¸èƒ½éšä¾¿ç§»ï¼Ÿ
                        </h3>
                        <div className="flex flex-1 gap-4">
                            <div className="w-1/3 bg-slate-900 rounded border border-gray-600 p-2 relative">
                                <div className="text-xs text-center text-gray-400 mb-2 border-b border-gray-700 pb-1">C:\Program Files</div>
                                {gameFolderState === 'installed' ? (
                                    <div className="bg-blue-600/20 border border-blue-500 p-2 rounded text-center cursor-grab active:cursor-grabbing transition-all hover:bg-blue-600/40">
                                        <div className="text-2xl">ğŸ®</div>
                                        <div className="text-xs">Game Folder</div>
                                    </div>
                                ) : (
                                    <div className="h-16 border-2 border-dashed border-gray-700 rounded flex items-center justify-center text-xs text-gray-600">
                                        (ç©º)
                                    </div>
                                )}
                            </div>
                            
                            <div className="flex flex-col justify-center gap-2">
                                <button onClick={moveFolder} className="bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs">
                                    {gameFolderState === 'installed' ? "ğŸ‘‰ å¼ºè¡Œç§»åˆ° D ç›˜" : "ğŸ‘ˆ ç§»å› C ç›˜"}
                                </button>
                            </div>

                            <div className="w-1/3 bg-slate-900 rounded border border-gray-600 p-2 relative">
                                <div className="text-xs text-center text-gray-400 mb-2 border-b border-gray-700 pb-1">D:\Downloads</div>
                                {gameFolderState === 'moved' ? (
                                    <div className="bg-yellow-600/20 border border-yellow-500 p-2 rounded text-center transition-all">
                                        <div className="text-2xl">ğŸ®</div>
                                        <div className="text-xs">Game Folder</div>
                                    </div>
                                ) : (
                                    <div className="h-16 border-2 border-dashed border-gray-700 rounded flex items-center justify-center text-xs text-gray-600">
                                        (ç©º)
                                    </div>
                                )}
                            </div>
                        </div>

                        <div className="mt-4 flex gap-4">
                            <div className="flex-1">
                                <div className="text-xs font-bold text-gray-300 mb-1">æ¡Œé¢å¿«æ·æ–¹å¼</div>
                                <div 
                                    onClick={runGame}
                                    className="w-16 h-16 bg-blue-900/50 hover:bg-blue-800 border border-blue-400 rounded flex flex-col items-center justify-center cursor-pointer relative group"
                                >
                                    <div className="text-2xl">ğŸš€</div>
                                    <div className="text-[10px] text-center w-full bg-black/50 absolute bottom-0">åŒå‡»å¯åŠ¨</div>
                                    <div className="absolute top-0 right-0 bg-white text-black text-[8px] px-1 rounded-bl">Shortcut</div>
                                </div>
                            </div>
                            <div className="flex-[2] bg-black p-2 font-mono text-[10px] text-green-400 border border-gray-600 rounded overflow-y-auto h-24">
                                {systemLog.map((log, i) => (
                                    <div key={i} className={log.type === 'error' ? 'text-red-400' : log.type === 'warning' ? 'text-yellow-400' : ''}>
                                        {log.msg}
                                    </div>
                                ))}
                                {systemLog.length === 0 && <span className="text-gray-600">ç­‰å¾…æ“ä½œ...</span>}
                            </div>
                        </div>
                        
                        <div className="mt-3 text-xs text-gray-400 border-t border-gray-700 pt-2">
                            <strong>åŸå› è§£æï¼š</strong>
                            <ul className="list-disc pl-4 mt-1 space-y-1">
                                <li><strong>æ³¨å†Œè¡¨æ­»é“¾ï¼š</strong>å®‰è£…æ—¶ï¼Œå†™å…¥äº† "InstallPath" = "C:\..."ï¼Œç§»åŠ¨åæ³¨å†Œè¡¨ä¸ä¼šè‡ªåŠ¨æ›´æ–°ã€‚</li>
                                <li><strong>å¿«æ·æ–¹å¼å¤±æ•ˆï¼š</strong>å¿«æ·æ–¹å¼åªæ˜¯ä¸€ä¸ªæŒ‡è·¯ç‰Œï¼Œå®ƒæŒ‡çš„åœ°æ–¹å¦‚æœç©ºäº†ï¼Œå°±ä¼šæŠ¥é”™ã€‚</li>
                                <li><strong>å¸è½½æ®‹ç•™ï¼š</strong>å¸è½½ç¨‹åºå»åŸä½ç½®æ‰¾æ–‡ä»¶åˆ é™¤ï¼Œç»“æœæ‰¾ä¸åˆ°ï¼Œå¯¼è‡´åƒåœ¾æ–‡ä»¶æ»ç•™ã€‚</li>
                            </ul>
                        </div>
                    </div>
                </div>
            );
        };

        // --- 4. é©±åŠ¨å®éªŒå®¤ (æ–°å¢ - é‡ç‚¹è®²è§£æ€ä¹ˆè£…é©±åŠ¨) ---
        const DriverSection = () => {
            const [driverStatus, setDriverStatus] = useState('missing'); // missing, installing, installed
            const [installMethod, setInstallMethod] = useState('windows_update'); // windows_update, website, device_manager
            const [showBSOD, setShowBSOD] = useState(false);

            const handleInstall = () => {
                if(driverStatus === 'installed') return;
                setDriverStatus('installing');
                setTimeout(() => {
                    setDriverStatus('installed');
                }, 2000);
            };

            const triggerBSOD = () => {
                setShowBSOD(true);
                setTimeout(() => {
                    setShowBSOD(false);
                    setDriverStatus('missing');
                }, 4000);
            };

            return (
                <div className="h-full flex flex-col gap-6 relative">
                    {/* BSOD Overlay */}
                    {showBSOD && (
                        <div className="absolute inset-0 z-50 bg-[#0078d7] text-white p-12 font-light flex flex-col gap-8 bsod-enter overflow-hidden">
                            <div className="text-[100px] leading-none">:(</div>
                            <div className="text-2xl">
                                ä½ çš„ç”µè„‘é‡åˆ°é—®é¢˜ï¼Œéœ€è¦é‡æ–°å¯åŠ¨ã€‚<br/>
                                <span className="text-sm">é”™è¯¯ä»£ç : DRIVER_IRQL_NOT_LESS_OR_EQUAL (é©±åŠ¨ç¨‹åºå†²çª)</span>
                            </div>
                            <div className="text-sm mt-auto animate-pulse">100% å®Œæˆ</div>
                        </div>
                    )}

                    <div className="flex gap-6 h-full">
                        {/* å·¦ä¾§ï¼šåŸç†ä¸æ¨¡æ‹Ÿ */}
                        <div className="flex-1 flex flex-col gap-4">
                            <div className="bg-slate-800 p-4 rounded-lg border border-slate-700">
                                <h3 className="font-bold text-white mb-2 flex items-center gap-2">
                                    <span className="text-cyan-400">ğŸ§</span> é©±åŠ¨ç¨‹åºï¼šç¡¬ä»¶ç¿»è¯‘å®˜
                                </h3>
                                <div className="text-xs text-gray-300 space-y-2">
                                    <div className="flex items-center gap-2 bg-slate-900 p-2 rounded">
                                        <span className="text-blue-300">Windows OS:</span> 
                                        <span className="italic">"è¯·åœ¨å±å¹•ä¸Šç”»ä¸€ä¸ªåœ†ã€‚" (è‹±è¯­)</span>
                                    </div>
                                    <div className="text-center text-gray-500">â¬‡ï¸ åªæœ‰é©±åŠ¨å¬å¾—æ‡‚è¿™ä¸¤è¾¹ â¬‡ï¸</div>
                                    <div className="flex items-center gap-2 bg-slate-900 p-2 rounded">
                                        <span className="text-green-300">æ˜¾å¡ç¡¬ä»¶:</span> 
                                        <span className="italic">"0x1F 0xB2..." (ç«æ˜Ÿè¯­/æœºå™¨ç )</span>
                                    </div>
                                </div>
                            </div>

                            <div className="flex-1 bg-black rounded-lg border-4 border-gray-600 relative overflow-hidden group">
                                <div className="absolute top-0 left-0 w-full bg-gray-800 text-[10px] text-gray-400 p-1 z-10 flex justify-between">
                                    <span>Display Preview</span>
                                    <span>{driverStatus === 'installed' ? 'GPU Accelerated' : 'Microsoft Basic Render'}</span>
                                </div>
                                <img 
                                    src="https://images.unsplash.com/photo-1550745165-9bc0b252726f?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" 
                                    alt="Game Scene" 
                                    className={`w-full h-full object-cover ${driverStatus === 'installed' ? 'clear-view' : 'pixelated-blur'}`}
                                />
                                {driverStatus === 'missing' && (
                                    <div className="absolute inset-0 flex items-center justify-center pointer-events-none">
                                        <div className="bg-black/70 p-4 text-center border border-yellow-500/50 rounded">
                                            <div className="text-yellow-400 font-bold mb-1">âš ï¸ ç”»é¢æ¨¡ç³Š/å¡é¡¿ï¼Ÿ</div>
                                            <div className="text-xs text-white">ç¼ºå°‘æ˜¾å¡é©±åŠ¨</div>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>

                        {/* å³ä¾§ï¼šæ€ä¹ˆå®‰è£… */}
                        <div className="flex-1 bg-slate-800 rounded-lg p-5 border border-slate-700 flex flex-col">
                            <h3 className="font-bold text-white mb-4">ğŸ› ï¸ å¦‚ä½•æ­£ç¡®å®‰è£…é©±åŠ¨ï¼Ÿ</h3>
                            
                            <div className="flex gap-2 mb-4 bg-slate-900 p-1 rounded">
                                <button 
                                    onClick={() => setInstallMethod('windows_update')}
                                    className={`flex-1 py-2 text-xs rounded transition-colors ${installMethod === 'windows_update' ? 'bg-blue-600 text-white' : 'text-gray-400 hover:text-white'}`}
                                >
                                    æ–¹æ³•1: ç³»ç»Ÿæ›´æ–°<br/>(æ¨èå°ç™½)
                                </button>
                                <button 
                                    onClick={() => setInstallMethod('website')}
                                    className={`flex-1 py-2 text-xs rounded transition-colors ${installMethod === 'website' ? 'bg-green-600 text-white' : 'text-gray-400 hover:text-white'}`}
                                >
                                    æ–¹æ³•2: å®˜ç½‘ä¸‹è½½<br/>(æ¨èç©å®¶)
                                </button>
                                <button 
                                    onClick={() => setInstallMethod('device_manager')}
                                    className={`flex-1 py-2 text-xs rounded transition-colors ${installMethod === 'device_manager' ? 'bg-gray-600 text-white' : 'text-gray-400 hover:text-white'}`}
                                >
                                    æ–¹æ³•3: è®¾å¤‡ç®¡ç†<br/>(è¡¥æ¼ç”¨)
                                </button>
                            </div>

                            <div className="flex-1 bg-slate-900 rounded p-4 border border-gray-600 mb-4">
                                {installMethod === 'windows_update' && (
                                    <div className="text-xs text-gray-300">
                                        <div className="font-bold text-white text-sm mb-2">Windows Update</div>
                                        <p>æœ€å®‰å…¨ã€æœ€çœå¿ƒã€‚ç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«ç¡¬ä»¶å¹¶ä»å¾®è½¯æœåŠ¡å™¨æ‹‰å–è®¤è¯è¿‡çš„é©±åŠ¨ã€‚</p>
                                        <div className="mt-4 p-2 bg-black rounded border border-gray-700 flex items-center gap-3">
                                            <span className="text-xl">ğŸ”„</span>
                                            <div>
                                                <div>NVIDIA - Display - 31.0.15...</div>
                                                <div className="text-gray-500">æ­£åœ¨ç­‰å¾…ä¸‹è½½...</div>
                                            </div>
                                        </div>
                                    </div>
                                )}
                                {installMethod === 'website' && (
                                    <div className="text-xs text-gray-300">
                                        <div className="font-bold text-white text-sm mb-2">ç¡¬ä»¶å®˜ç½‘ (å¦‚ NVIDIA/AMD/Intel)</div>
                                        <p>ç‰ˆæœ¬æœ€æ–°ï¼Œæ€§èƒ½æœ€å¼ºï¼ŒåŠŸèƒ½æœ€å…¨ã€‚ç©å¤§å‹æ¸¸æˆå¿…é€‰ã€‚</p>
                                        <div className="mt-4 p-2 bg-green-900/30 rounded border border-green-700/50 text-green-300">
                                            æ­£åœ¨ä¸‹è½½: GeForce_Game_Ready_Driver.exe
                                        </div>
                                        <p className="mt-2 text-red-400">ğŸš« è­¦å‘Šï¼šåƒä¸‡ä¸è¦å»æ‰€è°“â€œé©±åŠ¨xxç²¾çµâ€ä¸‹è½½ï¼Œå®¹æ˜“å¸¦å…¨å®¶æ¡¶ç—…æ¯’ã€‚</p>
                                    </div>
                                )}
                                {installMethod === 'device_manager' && (
                                    <div className="text-xs text-gray-300">
                                        <div className="font-bold text-white text-sm mb-2">è®¾å¤‡ç®¡ç†å™¨</div>
                                        <p>å³é”®è®¾å¤‡ -&gt; æ›´æ–°é©±åŠ¨ç¨‹åºã€‚é€‚åˆè§£å†³æŸäº›å†·é—¨ç¡¬ä»¶æ— æ³•è¯†åˆ«çš„é—®é¢˜ã€‚</p>
                                        <div className="mt-4 p-2 bg-white text-black rounded border border-gray-400">
                                            ğŸªŸ Windows æ­£åœ¨åœ¨çº¿æœç´¢é©±åŠ¨ç¨‹åº...
                                        </div>
                                    </div>
                                )}
                            </div>

                            {driverStatus === 'installed' ? (
                                <div className="space-y-3">
                                    <div className="bg-green-600 text-white p-2 rounded text-center text-sm font-bold animate-pulse-once">
                                        âœ“ é©±åŠ¨å®‰è£…æˆåŠŸ
                                    </div>
                                    <button onClick={triggerBSOD} className="w-full border border-red-500/50 text-red-400 p-2 rounded text-xs hover:bg-red-900/30 transition-colors">
                                        (æµ‹è¯•) æ¨¡æ‹Ÿå®‰è£…äº†é”™è¯¯ç‰ˆæœ¬çš„é©±åŠ¨
                                    </button>
                                </div>
                            ) : (
                                <button 
                                    onClick={handleInstall}
                                    disabled={driverStatus === 'installing'}
                                    className="bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-4 rounded transition-all disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center gap-2"
                                >
                                    {driverStatus === 'installing' ? 'æ­£åœ¨å®‰è£…...' : 'ç«‹å³å®‰è£…é©±åŠ¨'}
                                </button>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        // --- 5. æ³¨å†Œè¡¨ (Registry) ---
        const RegistrySection = () => {
            const [themeValue, setThemeValue] = useState(1); // 1 = Light, 0 = Dark
            const [selectedPath, setSelectedPath] = useState('Computer');
            const [selectedKey, setSelectedKey] = useState(null);

            // æ¨¡æ‹Ÿæ³¨å†Œè¡¨ç»“æ„ (ç”¨äºå±•ç¤ºï¼Œå®é™…åªç”¨ä½œé™æ€æ¸²æŸ“å‚è€ƒ)
            const treeData = {
                name: "Computer",
                children: [
                    { name: "HKEY_CLASSES_ROOT", desc: "æ–‡ä»¶ç±»å‹å…³è”" },
                    { 
                        name: "HKEY_CURRENT_USER", 
                        desc: "å½“å‰ç™»å½•ç”¨æˆ·çš„é…ç½® (ä½ )", 
                        isOpen: true,
                        children: [
                            { name: "Software", isOpen: true, children: [
                                { name: "Microsoft", isOpen: true, children: [
                                    { name: "Windows", isOpen: true, children: [
                                        { name: "Personalize", isTarget: true }
                                    ]}
                                ]}
                            ]}
                        ] 
                    },
                    { name: "HKEY_LOCAL_MACHINE", desc: "æœ¬æœºå…¨å±€é…ç½® (æ‰€æœ‰äºº)" },
                    { name: "HKEY_USERS", desc: "æ‰€æœ‰ç”¨æˆ·é…ç½®æ–‡ä»¶" },
                    { name: "HKEY_CURRENT_CONFIG", desc: "å½“å‰ç¡¬ä»¶é…ç½®" },
                ]
            };

            const toggleTheme = (val) => {
                const num = parseInt(val);
                if (!isNaN(num) && (num === 0 || num === 1)) {
                     setThemeValue(num);
                }
            };

            return (
                <div className="flex gap-6 h-full text-xs">
                    {/* å·¦ä¾§ï¼šè§£é‡Šä¸å¯¼èˆª */}
                    <div className="w-1/3 flex flex-col gap-4">
                        <div className="bg-slate-800 p-4 rounded-lg border border-slate-700">
                            <h3 className="font-bold text-white mb-2 flex items-center gap-2">
                                <span className="text-purple-400">ğŸ§¬</span> æ³¨å†Œè¡¨ (Registry)
                            </h3>
                            <p className="text-gray-400 mb-2">
                                Windows çš„æ ¸å¿ƒæ•°æ®åº“ã€‚è¿™é‡Œä¸å­˜æ–‡ä»¶ï¼Œåªå­˜<strong>é…ç½®</strong>ã€‚
                                å®ƒæ˜¯æ ‘çŠ¶ç»“æ„çš„ï¼ˆåƒæ–‡ä»¶å¤¹ä¸€æ ·ï¼‰ã€‚
                            </p>
                            <div className="bg-slate-900 p-2 rounded border border-gray-600 space-y-2">
                                <div className="text-green-400 font-bold">ä¸¤å¤§å·¨å¤´ï¼š</div>
                                <div>
                                    <span className="text-yellow-400 font-bold">HKCU</span> (Current User)<br/>
                                    <span className="text-gray-500">åªå½±å“ä½ è‡ªå·±ã€‚æ¯”å¦‚ä½ çš„å£çº¸ã€ä½ çš„é¼ æ ‡é€Ÿåº¦ã€‚</span>
                                </div>
                                <div>
                                    <span className="text-red-400 font-bold">HKLM</span> (Local Machine)<br/>
                                    <span className="text-gray-500">å½±å“è¿™å°ç”µè„‘ä¸Šæ‰€æœ‰äººã€‚æ¯”å¦‚å®‰è£…çš„é©±åŠ¨ã€ç³»ç»ŸæœåŠ¡å¯åŠ¨é¡¹ã€‚</span>
                                </div>
                            </div>
                        </div>

                        <div className="flex-1 bg-slate-800 p-4 rounded-lg border border-slate-700 flex flex-col justify-center items-center text-center">
                            <div className={`w-32 h-32 rounded-lg shadow-xl mb-4 transition-all duration-500 flex items-center justify-center border-4 ${themeValue === 1 ? 'bg-white border-gray-200' : 'bg-[#1e1e1e] border-gray-600'}`}>
                                <div className={`text-4xl ${themeValue === 1 ? 'text-black' : 'text-white'}`}>
                                    {themeValue === 1 ? 'â˜€ï¸' : 'ğŸŒ™'}
                                </div>
                            </div>
                            <div className="text-gray-300 font-bold">
                                å®æ—¶é¢„è§ˆï¼š{themeValue === 1 ? "æµ…è‰²æ¨¡å¼" : "æ·±è‰²æ¨¡å¼"}
                            </div>
                            <div className="text-gray-500 mt-2">
                                ä¿®æ”¹å³ä¾§æ³¨å†Œè¡¨æ•°å€¼ï¼Œ<br/>ç›´æ¥æ§åˆ¶ç³»ç»Ÿå¤–è§‚ã€‚
                            </div>
                        </div>
                    </div>

                    {/* å³ä¾§ï¼šæ¨¡æ‹Ÿç¼–è¾‘å™¨ */}
                    <div className="flex-1 bg-white text-black font-sans flex flex-col border border-gray-400 shadow-xl select-none">
                        {/* èœå•æ  */}
                        <div className="bg-gray-100 p-1 border-b flex text-[11px] gap-2">
                            <span>æ–‡ä»¶(F)</span><span>ç¼–è¾‘(E)</span><span>æŸ¥çœ‹(V)</span><span>æ”¶è—å¤¹(A)</span><span>å¸®åŠ©(H)</span>
                        </div>
                        {/* åœ°å€æ  */}
                        <div className="border-b p-1 flex items-center gap-2 bg-white">
                            <span className="text-gray-400">ğŸ–¥ï¸</span>
                            <input type="text" value="Computer\HKEY_CURRENT_USER\Software\Microsoft\Windows\Personalize" readOnly className="w-full border-none outline-none text-gray-600" />
                        </div>
                        
                        <div className="flex flex-1 overflow-hidden">
                            {/* æ ‘çŠ¶å›¾ */}
                            <div className="w-1/3 border-r border-gray-200 p-1 overflow-y-auto bg-white">
                                <div className="pl-2 flex items-center gap-1"><span className="text-gray-400">ğŸ“‚</span> Computer</div>
                                <div className="pl-6 flex items-center gap-1 font-bold bg-blue-100 border border-blue-200 text-blue-800"><span className="text-yellow-500">ğŸ“‚</span> HKEY_CURRENT_USER</div>
                                <div className="pl-10 flex items-center gap-1"><span className="text-yellow-500">ğŸ“‚</span> Software</div>
                                <div className="pl-14 flex items-center gap-1"><span className="text-yellow-500">ğŸ“‚</span> Microsoft</div>
                                <div className="pl-16 flex items-center gap-1"><span className="text-yellow-500">ğŸ“‚</span> Windows</div>
                                <div className="pl-20 flex items-center gap-1 bg-gray-200"><span className="text-yellow-500">ğŸ“‚</span> Personalize</div>
                            </div>

                            {/* é”®å€¼åˆ—è¡¨ */}
                            <div className="flex-1 bg-white flex flex-col relative">
                                <div className="grid grid-cols-3 border-b border-gray-200 bg-gray-50 text-gray-500 px-2 py-1">
                                    <span>åç§°</span>
                                    <span>ç±»å‹</span>
                                    <span>æ•°æ®</span>
                                </div>
                                <div className="p-2">
                                    <div className="flex items-center gap-2 text-red-500 text-[10px] mb-2 border border-red-200 bg-red-50 p-1">
                                        âš ï¸ è­¦å‘Šï¼šä¿®æ”¹æ³¨å†Œè¡¨æœ‰é£é™©ï¼Œè¯·å‹¿åœ¨çœŸå®ç³»ç»Ÿä¸­éšæ„æ“ä½œã€‚
                                    </div>
                                    <div className="grid grid-cols-3 py-1 px-1 hover:bg-blue-50 cursor-default">
                                        <span className="text-red-400">ab (é»˜è®¤)</span>
                                        <span>REG_SZ</span>
                                        <span>(æ•°å€¼æœªè®¾ç½®)</span>
                                    </div>
                                    <div 
                                        className="grid grid-cols-3 py-1 px-1 hover:bg-blue-100 cursor-pointer bg-blue-50 border border-blue-200"
                                        onClick={() => setSelectedKey('AppsUseLightTheme')}
                                    >
                                        <span className="flex items-center gap-1"><span className="text-blue-500">011</span> AppsUseLightTheme</span>
                                        <span>REG_DWORD</span>
                                        <span>0x0000000{themeValue} ({themeValue})</span>
                                    </div>
                                    <div className="grid grid-cols-3 py-1 px-1 hover:bg-blue-50 cursor-default opacity-50">
                                        <span className="flex items-center gap-1"><span className="text-blue-500">011</span> SystemUsesLightTheme</span>
                                        <span>REG_DWORD</span>
                                        <span>0x00000001 (1)</span>
                                    </div>
                                </div>

                                {/* å¼¹çª—æ¨¡æ‹Ÿ */}
                                {selectedKey && (
                                    <div className="absolute inset-0 bg-black/20 flex items-center justify-center">
                                        <div className="bg-white border shadow-2xl w-64 p-3 text-xs flex flex-col gap-3 font-sans">
                                            <div>
                                                <div className="font-bold mb-1">ç¼–è¾‘ DWORD (32ä½) å€¼</div>
                                                <div className="mb-1">æ•°å€¼åç§°(N):</div>
                                                <input type="text" value="AppsUseLightTheme" disabled className="w-full border bg-gray-100 p-1 mb-2 text-gray-500" />
                                                <div className="mb-1">æ•°å€¼æ•°æ®(V):</div>
                                                <input 
                                                    type="number" 
                                                    min="0" max="1" 
                                                    value={themeValue} 
                                                    onChange={(e) => toggleTheme(e.target.value)}
                                                    className="w-full border p-1 focus:border-blue-500 outline-none" 
                                                    autoFocus
                                                />
                                            </div>
                                            <div className="flex justify-end gap-2">
                                                <button onClick={() => setSelectedKey(null)} className="px-3 py-1 border bg-gray-100 hover:bg-gray-200 rounded-sm">ç¡®å®š</button>
                                                <button onClick={() => setSelectedKey(null)} className="px-3 py-1 border bg-gray-100 hover:bg-gray-200 rounded-sm">å–æ¶ˆ</button>
                                            </div>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                        {/* çŠ¶æ€æ  */}
                        <div className="border-t bg-gray-50 p-1 text-gray-500">
                            Computer\HKEY_CURRENT_USER\Software\Microsoft\Windows\Personalize
                        </div>
                    </div>
                </div>
            );
        };

        // --- 6. ä»»åŠ¡ç®¡ç†å™¨ (Windows 10/11 é£æ ¼é‡ç»˜ç‰ˆ + æ€§èƒ½Tabè”åŠ¨) ---
        const TaskManagerSection = () => {
            const [activeTab, setActiveTab] = useState('processes'); // processes, performance
            const [selectedId, setSelectedId] = useState(null);
            const [processes, setProcesses] = useState([
                { id: 1, name: 'Google Chrome', status: 'Running', cpu: 1.2, mem: 450, disk: 0.1, net: 0, type: 'app', icon: 'ğŸŒ' },
                { id: 2, name: 'Steam Client Bootstrapper', status: 'Running', cpu: 2.5, mem: 120, disk: 0, net: 0.1, type: 'app', icon: 'ğŸ®' },
                { id: 3, name: 'Visual Studio Code', status: 'Running', cpu: 0.5, mem: 280, disk: 0, net: 0, type: 'app', icon: 'ğŸ“' },
                { id: 4, name: 'Service Host: Local System', status: 'Running', cpu: 0.1, mem: 15, disk: 0, net: 0, type: 'bg', icon: 'âš™ï¸' },
                { id: 5, name: 'System Interrupts', status: 'Running', cpu: 0.1, mem: 0.1, disk: 0, net: 0, type: 'bg', icon: 'âš¡' },
                { id: 6, name: 'CRASH_DEMO_APP.exe', status: 'Not Responding', cpu: 99.9, mem: 2048, disk: 50, net: 0, type: 'stuck', icon: 'âš ï¸' },
            ]);

            const [perfType, setPerfType] = useState('cpu'); // cpu, mem, disk, net
            
            // åˆå§‹åŒ–æ•°æ®
            const [perfData, setPerfData] = useState(() => {
                const hasCrash = processes.some(p => p.type === 'stuck');
                return Array(60).fill(hasCrash ? 100 : 10);
            });

            // æ¨¡æ‹Ÿå®æ—¶æ€§èƒ½æ•°æ®æ³¢åŠ¨
            useEffect(() => {
                if (activeTab === 'performance') {
                    const interval = setInterval(() => {
                        setPerfData(prev => {
                            const newData = [...prev.slice(1)];
                            const hasCrashApp = processes.some(p => p.type === 'stuck');
                            let base = 0;
                            let noise = Math.random() * 5;

                            if (perfType === 'cpu') {
                                if (hasCrashApp) {
                                    base = 98;
                                    noise = Math.random() * 2;
                                } else {
                                    base = 10;
                                    noise = Math.random() * 15;
                                }
                            } else if (perfType === 'mem') {
                                base = hasCrashApp ? 55 : 40; 
                                noise = Math.random() * 2 - 1;
                            } else if (perfType === 'disk') {
                                base = hasCrashApp ? 40 : 1; 
                                noise = Math.random() * 5;
                            } else {
                                base = 0;
                                noise = Math.random() * 2;
                            }

                            newData.push(Math.max(0, Math.min(100, base + noise)));
                            return newData;
                        });
                    }, 500); 
                    return () => clearInterval(interval);
                }
            }, [activeTab, perfType, processes]);

            const handleEndTask = () => {
                if (selectedId) {
                    setProcesses(prev => prev.filter(p => p.id !== selectedId));
                    setSelectedId(null);
                }
            };

            const getHeatMapColor = (value, type) => {
                if (type === 'cpu') {
                    if (value > 90) return 'bg-[#e04f5f] text-white'; 
                    if (value > 50) return 'bg-[#d28028] text-white'; 
                    if (value > 10) return 'bg-[#cfae3d] text-black'; 
                }
                if (type === 'mem') {
                    if (value > 1000) return 'bg-[#ddae58] text-black';
                    if (value > 500) return 'bg-[#eadd83] text-black';
                }
                if (type === 'disk' && value > 10) return 'bg-[#e04f5f] text-white';
                return 'transparent';
            };

            const MiniChart = ({ data, color = "#60a5fa" }) => {
                const width = 60;
                const height = 30;
                const points = data.slice(-20).map((val, i) => {
                    const x = (i / 19) * width;
                    const y = height - (val / 100) * height;
                    return `${x},${y}`;
                }).join(' ');
                return (
                    <svg width="100%" height="100%" viewBox={`0 0 ${width} ${height}`} preserveAspectRatio="none">
                        <polyline points={points} fill="none" stroke={color} strokeWidth="1.5" />
                    </svg>
                );
            };

            const BigChart = ({ data, color = "#60a5fa" }) => {
                const width = 400;
                const height = 150;
                const points = data.map((val, i) => {
                    const x = (i / (data.length - 1)) * width;
                    const y = height - (val / 100) * height;
                    return `${x},${y}`;
                }).join(' ');
                const areaPoints = `${points} ${width},${height} 0,${height}`;

                return (
                    <svg width="100%" height="100%" viewBox={`0 0 ${width} ${height}`} preserveAspectRatio="none">
                        <defs>
                            <linearGradient id="chartGradient" x1="0" y1="0" x2="0" y2="1">
                                <stop offset="0%" stopColor={color} stopOpacity="0.2"/>
                                <stop offset="100%" stopColor={color} stopOpacity="0"/>
                            </linearGradient>
                        </defs>
                        <polygon points={areaPoints} fill="url(#chartGradient)" />
                        <polyline points={points} fill="none" stroke={color} strokeWidth="2" />
                        <line x1="0" y1="0" x2={width} y2="0" stroke="#444" strokeWidth="0.5" strokeDasharray="4" />
                        <line x1="0" y1={height/2} x2={width} y2={height/2} stroke="#444" strokeWidth="0.5" strokeDasharray="4" />
                        <line x1="0" y1={height} x2={width} y2={height} stroke="#444" strokeWidth="0.5" strokeDasharray="4" />
                    </svg>
                );
            };

            const PerfSidebarItem = ({ title, subtitle, value, type, active, onClick }) => (
                <div 
                    onClick={onClick}
                    className={`p-2 border-l-4 cursor-pointer hover:bg-[#3a3a3a] transition-colors flex gap-3 items-center h-16 ${active ? 'bg-[#3a3a3a] border-blue-500' : 'border-transparent'}`}
                >
                    <div className="flex-1 min-w-0">
                        <div className="font-bold text-sm truncate">{title}</div>
                        <div className="text-xs text-gray-400 truncate">{subtitle}</div>
                    </div>
                    <div className="flex flex-col items-end w-20">
                        <div className="font-mono text-sm">{value}</div>
                        <div className="w-16 h-8 mt-1 opacity-70">
                            {active ? <MiniChart data={perfData} /> : <MiniChart data={type === 'cpu' && processes.some(p=>p.type==='stuck') ? Array(20).fill(100) : Array(20).fill(5)} color="#888"/>}
                        </div>
                    </div>
                </div>
            );

            return (
                <div className="h-full flex flex-col bg-[#202020] text-white font-sans text-xs border border-gray-600 rounded-lg shadow-2xl overflow-hidden select-none relative">
                    <div className="bg-[#2d2d2d] p-2 flex justify-between items-center border-b border-gray-600">
                        <div className="flex items-center gap-2">
                            <span className="w-4 h-4 bg-blue-500 rounded-sm flex items-center justify-center text-[10px]">ğŸ“Š</span>
                            <span className="text-xs font-normal">ä»»åŠ¡ç®¡ç†å™¨</span>
                        </div>
                        <div className="flex gap-4 px-2">
                             <span className="w-3 h-3 border border-gray-500 rounded-sm"></span>
                             <span className="w-3 h-3 border border-gray-500 rounded-sm"></span>
                             <span className="w-3 h-3 border border-gray-500 rounded-sm bg-red-500 border-red-500"></span>
                        </div>
                    </div>

                    <div className="bg-[#2d2d2d] flex gap-1 px-2 pt-1 border-b border-gray-600 text-gray-400">
                        <div 
                            onClick={() => setActiveTab('processes')}
                            className={`px-3 py-1 rounded-t-sm cursor-pointer transition-colors ${activeTab === 'processes' ? 'bg-[#202020] text-white border-t border-l border-r border-gray-600' : 'hover:bg-[#3a3a3a]'}`}
                        >
                            è¿›ç¨‹
                        </div>
                        <div 
                            onClick={() => setActiveTab('performance')}
                            className={`px-3 py-1 rounded-t-sm cursor-pointer transition-colors ${activeTab === 'performance' ? 'bg-[#202020] text-white border-t border-l border-r border-gray-600' : 'hover:bg-[#3a3a3a]'}`}
                        >
                            æ€§èƒ½
                        </div>
                        <div className="px-3 py-1 hover:bg-[#3a3a3a] rounded-t-sm cursor-not-allowed opacity-50">åº”ç”¨å†å²è®°å½•</div>
                        <div className="px-3 py-1 hover:bg-[#3a3a3a] rounded-t-sm cursor-not-allowed opacity-50">å¯åŠ¨</div>
                        <div className="px-3 py-1 hover:bg-[#3a3a3a] rounded-t-sm cursor-not-allowed opacity-50">ç”¨æˆ·</div>
                    </div>
                    
                    <div className="flex-1 overflow-hidden bg-[#202020] relative">
                        {activeTab === 'processes' && (
                            <div className="h-full flex flex-col">
                                <div className="grid grid-cols-12 bg-[#2d2d2d] border-b border-gray-600 text-gray-400 py-1 px-2 gap-1 items-center font-bold">
                                    <div className="col-span-5 pl-2 border-r border-gray-600 hover:bg-[#3a3a3a] cursor-default">åç§°</div>
                                    <div className="col-span-2 pl-2 border-r border-gray-600 hover:bg-[#3a3a3a] cursor-default">çŠ¶æ€</div>
                                    <div className="col-span-1 pl-2 border-r border-gray-600 hover:bg-[#3a3a3a] text-right pr-2 cursor-default">CPU</div>
                                    <div className="col-span-2 pl-2 border-r border-gray-600 hover:bg-[#3a3a3a] text-right pr-2 cursor-default">å†…å­˜</div>
                                    <div className="col-span-1 pl-2 border-r border-gray-600 hover:bg-[#3a3a3a] text-right pr-2 cursor-default">ç£ç›˜</div>
                                    <div className="col-span-1 pl-2 hover:bg-[#3a3a3a] text-right pr-2 cursor-default">ç½‘ç»œ</div>
                                </div>

                                <div className="flex-1 overflow-y-auto bg-[#202020] win-scroll">
                                    {processes.map(p => (
                                        <div 
                                            key={p.id}
                                            onClick={() => setSelectedId(p.id)}
                                            className={`grid grid-cols-12 gap-1 py-[3px] px-2 items-center cursor-default ${selectedId === p.id ? 'bg-[#43505c]' : 'hover:bg-[#2a2a2a]'}`}
                                        >
                                            <div className="col-span-5 flex items-center gap-2 overflow-hidden pl-2">
                                                <span className="flex-shrink-0 w-4 h-4 text-center opacity-80">{p.icon}</span>
                                                <span className="truncate" title={p.name}>{p.name}</span>
                                            </div>
                                            <div className={`col-span-2 truncate pl-2 ${p.status === 'Not Responding' ? 'text-red-400' : 'text-gray-400'}`}>
                                                {p.status === 'Running' ? '' : p.status}
                                            </div>
                                            <div className={`col-span-1 text-right pr-2 ${getHeatMapColor(p.cpu, 'cpu')}`}>
                                                {p.cpu.toFixed(1)}%
                                            </div>
                                            <div className={`col-span-2 text-right pr-2 ${getHeatMapColor(p.mem, 'mem')}`}>
                                                {p.mem.toFixed(1)} MB
                                            </div>
                                            <div className={`col-span-1 text-right pr-2 ${getHeatMapColor(p.disk, 'disk')}`}>
                                                {p.disk.toFixed(1)} MB/s
                                            </div>
                                            <div className="col-span-1 text-right pr-2 text-gray-400">
                                                {p.net} Mbps
                                            </div>
                                        </div>
                                    ))}
                                    {processes.length === 0 && <div className="p-4 text-center text-gray-500">æ‰€æœ‰ä»»åŠ¡å·²ç»“æŸ</div>}
                                </div>

                                <div className="bg-[#2d2d2d] border-t border-gray-600 p-2 flex justify-between items-center h-10 mt-auto">
                                    <div className="text-gray-400 pl-2">
                                        è¿›ç¨‹æ•°: {processes.length}
                                    </div>
                                    <button 
                                        onClick={handleEndTask}
                                        disabled={!selectedId}
                                        className={`px-4 py-1 rounded border text-sm transition-colors ${
                                            selectedId 
                                            ? 'bg-[#3a3a3a] border-gray-500 text-white hover:bg-[#4a4a4a] active:bg-[#2a2a2a]' 
                                            : 'bg-[#2d2d2d] border-gray-600 text-gray-500 cursor-not-allowed'
                                        }`}
                                    >
                                        ç»“æŸä»»åŠ¡
                                    </button>
                                </div>
                            </div>
                        )}

                        {activeTab === 'performance' && (
                            <div className="h-full flex">
                                <div className="w-1/3 max-w-[200px] border-r border-gray-600 flex flex-col overflow-y-auto win-scroll bg-[#252525]">
                                    <PerfSidebarItem 
                                        title="CPU" subtitle="Intel Core i9-9900K" 
                                        value={perfType==='cpu' ? `${perfData[perfData.length-1].toFixed(0)}%` : (processes.some(p=>p.type==='stuck') ? "100%" : "12%")} 
                                        active={perfType === 'cpu'} onClick={() => setPerfType('cpu')} 
                                    />
                                    <PerfSidebarItem 
                                        title="å†…å­˜" subtitle="16.0 GB" 
                                        value={perfType==='mem' ? `${(perfData[perfData.length-1]/100 * 16).toFixed(1)} GB` : (processes.some(p=>p.type==='stuck') ? "9.2 GB" : "4.5 GB")} 
                                        active={perfType === 'mem'} onClick={() => setPerfType('mem')} 
                                    />
                                    <PerfSidebarItem 
                                        title="ç£ç›˜ 0 (C:)" subtitle="SSD" 
                                        value={perfType==='disk' ? `${perfData[perfData.length-1].toFixed(0)}%` : (processes.some(p=>p.type==='stuck') ? "50%" : "1%")} 
                                        active={perfType === 'disk'} onClick={() => setPerfType('disk')} 
                                    />
                                    <PerfSidebarItem 
                                        title="ä»¥å¤ªç½‘" subtitle="S: 0 R: 0 Kbps" 
                                        value="0%" 
                                        active={perfType === 'net'} onClick={() => setPerfType('net')} 
                                    />
                                </div>

                                <div className="flex-1 p-4 flex flex-col overflow-y-auto win-scroll">
                                    <div className="flex justify-between items-end mb-2">
                                        <span className="text-xl font-bold text-blue-400">
                                            {perfType === 'cpu' ? 'CPU' : perfType === 'mem' ? 'å†…å­˜' : perfType === 'disk' ? 'ç£ç›˜ 0 (C:)' : 'ä»¥å¤ªç½‘'}
                                        </span>
                                        <span className="text-base font-thin text-gray-300">
                                            {perfType === 'cpu' ? 'Intel Core i9-9900K @ 3.60GHz' : perfType === 'mem' ? '16.0 GB DDR4' : 'Samsung SSD 970 EVO Plus 1TB'}
                                        </span>
                                    </div>
                                    
                                    <div className="h-64 border border-gray-600 bg-[#1e1e1e] mb-6 relative p-px">
                                        <div className="absolute top-2 right-2 text-gray-400 text-xs">60 ç§’</div>
                                        <div className="absolute top-2 left-2 text-gray-400 text-xs">100%</div>
                                        <div className="absolute bottom-2 left-2 text-gray-400 text-xs">0%</div>
                                        <BigChart data={perfData} color={perfType === 'mem' ? '#a855f7' : '#60a5fa'} />
                                    </div>

                                    <div className="grid grid-cols-3 gap-x-8 gap-y-4 text-sm text-gray-400">
                                        {perfType === 'cpu' && (
                                            <>
                                                <div><div className="text-xs">åˆ©ç”¨ç‡</div><div className="text-xl text-white">{perfData[perfData.length-1].toFixed(0)}%</div></div>
                                                <div><div className="text-xs">é€Ÿåº¦</div><div className="text-xl text-white">4.20 GHz</div></div>
                                                <div><div className="text-xs">è¿›ç¨‹</div><div className="text-xl text-white">{processes.length + 180}</div></div>
                                                <div><div className="text-xs">çº¿ç¨‹</div><div className="text-xl text-white">2450</div></div>
                                                <div><div className="text-xs">å¥æŸ„</div><div className="text-xl text-white">89021</div></div>
                                                <div><div className="text-xs">æ­£å¸¸è¿è¡Œæ—¶é—´</div><div className="text-xl text-white">0:04:21:12</div></div>
                                                <div className="col-span-3 border-t border-gray-600 mt-2 pt-2 flex justify-between">
                                                    <span>åŸºå‡†é€Ÿåº¦: 3.60 GHz</span>
                                                    <span>å†…æ ¸: 8</span>
                                                    <span>é€»è¾‘å¤„ç†å™¨: 16</span>
                                                </div>
                                            </>
                                        )}
                                        {perfType === 'mem' && (
                                            <>
                                                <div><div className="text-xs">ä½¿ç”¨ä¸­</div><div className="text-xl text-white">{(perfData[perfData.length-1]/100 * 16).toFixed(1)} GB</div></div>
                                                <div><div className="text-xs">å¯ç”¨</div><div className="text-xl text-white">{(16 - perfData[perfData.length-1]/100 * 16).toFixed(1)} GB</div></div>
                                                <div><div className="text-xs">å·²æäº¤</div><div className="text-xl text-white">9.2/18.0 GB</div></div>
                                                <div><div className="text-xs">å·²ç¼“å­˜</div><div className="text-xl text-white">4.5 GB</div></div>
                                                <div><div className="text-xs">åˆ†é¡µç¼“å†²æ± </div><div className="text-xl text-white">482 MB</div></div>
                                                <div><div className="text-xs">éåˆ†é¡µç¼“å†²æ± </div><div className="text-xl text-white">390 MB</div></div>
                                                <div className="col-span-3 border-t border-gray-600 mt-2 pt-2">
                                                    é€Ÿåº¦: 3200 MHz &nbsp;&nbsp; æ’æ§½: 2/4 &nbsp;&nbsp; å¤–å½¢è§„æ ¼: DIMM
                                                </div>
                                            </>
                                        )}
                                    </div>
                                </div>
                            </div>
                        )}

                        {activeTab === 'processes' && processes.some(p => p.type === 'stuck') && (
                            <div className="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-blue-600 text-white p-4 rounded-lg shadow-2xl animate-hint pointer-events-none z-20 border border-blue-400">
                                <div className="font-bold text-lg mb-1">â˜ï¸ è­¦æŠ¥ï¼šCPU 100%</div>
                                <div className="text-blue-100">
                                    å‘ç°çº¢è‰²é«˜äº®çš„ "CRASH_APP" äº†å—ï¼Ÿ<br/>
                                    é€‰ä¸­å®ƒï¼Œç„¶åç‚¹å‡»å³ä¸‹è§’çš„ [ç»“æŸä»»åŠ¡]ï¼
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // --- 7. ç¯å¢ƒå˜é‡ (æ¨¡æ‹ŸçœŸå®æ“ä½œ) ---
        const EnvVarSection = () => {
            const [terminalInput, setTerminalInput] = useState('');
            const [terminalOutput, setTerminalOutput] = useState([
                { text: "Windows PowerShell", type: 'info' },
                { text: "Copyright (C) Microsoft Corporation. All rights reserved.", type: 'info' },
                { text: "", type: 'empty' }
            ]);
            
            const [hasPython, setHasPython] = useState(false);
            const [selectedRow, setSelectedRow] = useState(null);
            const [showPathEditor, setShowPathEditor] = useState(false);
            const [pathList, setPathList] = useState([
                "C:\\Users\\Admin\\AppData\\Local\\Microsoft\\WindowsApps",
                "C:\\Users\\Admin\\AppData\\Local\\Programs\\Microsoft VS Code\\bin"
            ]);

            const userVars = [
                { name: "OneDrive", value: "C:\\Users\\Admin\\OneDrive" },
                { name: "Path", value: hasPython ? "C:\\Users\\Admin\\...;C:\\Python39\\bin" : "C:\\Users\\Admin\\AppData\\Local\\..." },
                { name: "TEMP", value: "C:\\Users\\Admin\\AppData\\Local\\Temp" },
                { name: "TMP", value: "C:\\Users\\Admin\\AppData\\Local\\Temp" }
            ];

            const sysVars = [
                { name: "ComSpec", value: "C:\\WINDOWS\\system32\\cmd.exe" },
                { name: "DriverData", value: "C:\\Windows\\System32\\Drivers\\DriverData" },
                { name: "OS", value: "Windows_NT" },
                { name: "Path", value: "C:\\WINDOWS\\system32;C:\\WINDOWS;..." },
                { name: "PROCESSOR_ARCHITECTURE", value: "AMD64" }
            ];

            const handleCommand = (e) => {
                if (e.key === 'Enter') {
                    const cmd = terminalInput.trim();
                    const newOutput = [...terminalOutput, { text: `PS C:\\Users\\Admin> ${cmd}`, type: 'command' }];
                    
                    if (cmd === 'python') {
                        if (hasPython) {
                            newOutput.push({ text: "Python 3.9.5 (tags/v3.9.5:0a7dcbd) [MSC v.1928 64 bit (AMD64)] on win32", type: 'success' });
                            newOutput.push({ text: "Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.", type: 'success' });
                            newOutput.push({ text: ">>> ", type: 'success' });
                        } else {
                            newOutput.push({ text: "python : æ— æ³•å°†â€œpythonâ€é¡¹è¯†åˆ«ä¸º cmdletã€å‡½æ•°ã€è„šæœ¬æ–‡ä»¶æˆ–å¯è¿è¡Œç¨‹åºçš„åç§°ã€‚", type: 'error' });
                            newOutput.push({ text: "è¯·æ£€æŸ¥åç§°çš„æ‹¼å†™ï¼Œå¦‚æœåŒ…æ‹¬è·¯å¾„ï¼Œè¯·ç¡®ä¿è·¯å¾„æ­£ç¡®ï¼Œç„¶åå†è¯•ä¸€æ¬¡ã€‚", type: 'error' });
                        }
                    } else if (cmd === 'clear') {
                        setTerminalOutput([]);
                        setTerminalInput('');
                        return;
                    } else if (cmd !== '') {
                        newOutput.push({ text: `æ— æ³•è¯†åˆ«å‘½ä»¤ '${cmd}'`, type: 'error' });
                    }
                    
                    setTerminalOutput(newOutput);
                    setTerminalInput('');
                }
            };

            const addPythonToPath = () => {
                if (!pathList.includes("C:\\Python39\\bin")) {
                    setPathList([...pathList, "C:\\Python39\\bin"]);
                    setHasPython(true);
                }
            };

            return (
                <div className="h-full flex flex-col gap-6">
                    <div className="flex-1 bg-[#f0f0f0] rounded-lg shadow-xl border border-gray-400 text-black font-sans text-xs flex flex-col relative overflow-hidden select-none">
                        <div className="bg-white px-3 py-2 border-b border-gray-200 flex justify-between items-center">
                            <span>ç¯å¢ƒå˜é‡</span>
                            <div className="flex gap-2 text-gray-400">
                                <span>?</span>
                                <span>âœ•</span>
                            </div>
                        </div>

                        <div className="p-4 flex flex-col gap-4 overflow-y-auto win-scroll">
                            <div>
                                <div className="mb-1">Admin çš„ç”¨æˆ·å˜é‡(U)</div>
                                <div className="bg-white border border-gray-400 h-28 overflow-y-auto win-scroll">
                                    <table className="w-full text-left border-collapse">
                                        <thead>
                                            <tr className="bg-gray-100 border-b border-gray-300">
                                                <th className="font-normal w-1/3 pl-1 border-r border-gray-200">å˜é‡</th>
                                                <th className="font-normal pl-1">å€¼</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {userVars.map((v, i) => (
                                                <tr 
                                                    key={i} 
                                                    onClick={() => setSelectedRow(v.name)}
                                                    className={`cursor-default ${selectedRow === v.name ? 'bg-[#0078d7] text-white' : 'hover:bg-gray-100'}`}
                                                >
                                                    <td className="pl-1 border-r border-gray-200 border-dotted truncate max-w-[100px]">{v.name}</td>
                                                    <td className="pl-1 truncate max-w-[200px]">{v.value}</td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                                <div className="flex justify-end gap-2 mt-2">
                                    <button 
                                        onClick={() => {
                                            if (selectedRow === 'Path') setShowPathEditor(true);
                                            else alert("è¯·å…ˆé€‰ä¸­ 'Path' å˜é‡ï¼æˆ‘ä»¬éœ€è¦å‘Šè¯‰ç³»ç»Ÿå»å“ªé‡Œæ‰¾ç¨‹åºã€‚");
                                        }}
                                        className="px-3 py-1 border border-gray-400 bg-[#e1e1e1] hover:bg-[#e5f1fb] hover:border-[#0078d7] rounded-sm"
                                    >
                                        ç¼–è¾‘(E)...
                                    </button>
                                </div>
                            </div>

                            <div>
                                <div className="mb-1">ç³»ç»Ÿå˜é‡(S)</div>
                                <div className="bg-white border border-gray-400 h-28 overflow-y-auto opacity-70 win-scroll">
                                    <table className="w-full text-left border-collapse text-gray-600">
                                        <thead>
                                            <tr className="bg-gray-100 border-b border-gray-300">
                                                <th className="font-normal w-1/3 pl-1 border-r border-gray-200">å˜é‡</th>
                                                <th className="font-normal pl-1">å€¼</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {sysVars.map((v, i) => (
                                                <tr key={i}>
                                                    <td className="pl-1 border-r border-gray-200 border-dotted truncate max-w-[100px]">{v.name}</td>
                                                    <td className="pl-1 truncate max-w-[200px]">{v.value}</td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        {showPathEditor && (
                            <div className="absolute inset-0 bg-black/50 flex items-center justify-center z-50">
                                <div className="bg-white w-[90%] h-[90%] shadow-2xl border border-gray-500 flex flex-col text-xs">
                                    <div className="p-2 border-b flex justify-between items-center">
                                        <span>ç¼–è¾‘ç¯å¢ƒå˜é‡</span>
                                        <button onClick={() => setShowPathEditor(false)} className="hover:bg-red-500 hover:text-white px-2">âœ•</button>
                                    </div>
                                    <div className="flex-1 p-3 flex gap-3 overflow-hidden">
                                        <div className="flex-1 bg-white border border-gray-400 overflow-y-auto p-1 win-scroll">
                                            {pathList.map((path, i) => (
                                                <div key={i} className="hover:bg-[#e5f1fb] hover:border-[#0078d7] border border-transparent px-1 truncate">
                                                    {path}
                                                </div>
                                            ))}
                                        </div>
                                        <div className="flex flex-col gap-2 w-24">
                                            <button 
                                                onClick={addPythonToPath}
                                                className={`px-3 py-1 border border-gray-400 bg-[#e1e1e1] hover:bg-[#e5f1fb] hover:border-[#0078d7] rounded-sm text-left pl-2 ${hasPython ? 'opacity-50' : 'animate-pulse border-blue-500 font-bold'}`}
                                            >
                                                æ–°å»º(N)
                                            </button>
                                            <button className="px-3 py-1 border border-gray-400 bg-[#e1e1e1] rounded-sm text-left pl-2 opacity-50">ç¼–è¾‘(E)</button>
                                            <button className="px-3 py-1 border border-gray-400 bg-[#e1e1e1] rounded-sm text-left pl-2 opacity-50">åˆ é™¤(D)</button>
                                        </div>
                                    </div>
                                    <div className="p-2 border-t bg-[#f0f0f0] flex justify-end gap-2">
                                        <button onClick={() => setShowPathEditor(false)} className="px-4 py-1 border border-[#0078d7] bg-[#e1e1e1] hover:bg-[#e5f1fb] rounded-sm">ç¡®å®š</button>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>

                    <div className="h-48 bg-[#012456] text-gray-200 font-mono text-sm p-2 overflow-y-auto border-t-4 border-gray-600 rounded-b-lg shadow-inner win-scroll">
                        {terminalOutput.map((line, i) => (
                            <div key={i} className={`mb-1 break-all ${line.type === 'error' ? 'text-red-400' : line.type === 'success' ? 'text-green-300' : ''}`}>
                                {line.text}
                            </div>
                        ))}
                        <div className="flex">
                            <span className="text-white mr-2">PS C:\Users\Admin&gt;</span>
                            <input 
                                type="text" 
                                value={terminalInput}
                                onChange={(e) => setTerminalInput(e.target.value)}
                                onKeyDown={handleCommand}
                                className="bg-transparent border-none outline-none flex-1 text-white"
                                autoFocus
                                placeholder={hasPython ? "ç¯å¢ƒå·²é…ç½®ï¼è¾“å…¥ python è¯•è¯•" : "è¾“å…¥ python è¯•è¯•..."}
                            />
                        </div>
                    </div>
                </div>
            );
        };

        // --- ä¸»æ¡†æ¶ ---
        function App() {
            const [activeTab, setActiveTab] = useState('cmd');

            const MENU_ITEMS = [
                { id: 'cmd', icon: 'ğŸ’»', title: 'æ§åˆ¶å° (CMD/PS)', desc: 'çœŸæ­£çš„æƒåŠ›ä¸­å¿ƒ' },
                { id: 'file', icon: 'ğŸ—„ï¸', title: 'æ–‡ä»¶ç³»ç»Ÿ', desc: 'åˆ†åŒºã€æ ¼å¼åŒ–ä¸åˆ é™¤åŸç†' },
                { id: 'path', icon: 'ğŸ“‚', title: 'è·¯å¾„ä¸ç§»åŠ¨', desc: 'è¿·å®«å¯¼èˆªä¸æ­»é“¾' },
                { id: 'driver', icon: 'ğŸ§', title: 'é©±åŠ¨ç¨‹åº', desc: 'ç¡¬ä»¶ç¿»è¯‘å®˜' },
                { id: 'registry', icon: 'ğŸ§¬', title: 'æ³¨å†Œè¡¨', desc: 'ç³»ç»Ÿçš„ DNA' },
                { id: 'task', icon: 'ğŸ’“', title: 'ä»»åŠ¡ç®¡ç†å™¨', desc: 'éšå½¢çš„å·¥ä½œè€…' },
                { id: 'env', icon: 'ğŸ—ºï¸', title: 'ç¯å¢ƒå˜é‡', desc: 'ç³»ç»Ÿé€šè®¯å½•' },
            ];

            const renderContent = () => {
                switch(activeTab) {
                    case 'cmd': return <TerminalSection />;
                    case 'file': return <FileSystemSection />;
                    case 'path': return <PathSection />;
                    case 'driver': return <DriverSection />;
                    case 'registry': return <RegistrySection />;
                    case 'task': return <TaskManagerSection />;
                    case 'env': return <EnvVarSection />;
                    default: return <TerminalSection />;
                }
            };

            return (
                <div className="flex h-screen w-screen">
                    <div className="w-64 bg-slate-900 border-r border-slate-700 flex flex-col">
                        <div className="p-6 border-b border-slate-800">
                            <h1 className="text-xl font-bold text-white flex items-center gap-2">
                                <span className="text-cyan-400">WIN</span>
                                <span className="font-light">INTERNALS</span>
                            </h1>
                            <p className="text-xs text-slate-400 mt-1">è¿›é˜¶æŒ‡å— v3.2</p>
                        </div>
                        <nav className="flex-1 p-4 space-y-2">
                            {MENU_ITEMS.map(item => (
                                <button
                                    key={item.id}
                                    onClick={() => setActiveTab(item.id)}
                                    className={`nav-item w-full text-left p-3 rounded transition-all duration-200 group ${activeTab === item.id ? 'active' : 'text-slate-400 hover:text-white hover:bg-slate-800'}`}
                                >
                                    <div className="flex items-center gap-3">
                                        <span className="text-xl group-hover:scale-110 transition-transform">{item.icon}</span>
                                        <div>
                                            <div className="font-bold text-sm">{item.title}</div>
                                            <div className="text-[10px] opacity-70">{item.desc}</div>
                                        </div>
                                    </div>
                                </button>
                            ))}
                        </nav>
                        
                        <div className="p-4 m-4 bg-gradient-to-br from-indigo-900 to-slate-900 rounded border border-indigo-500/30 text-xs">
                            <div className="font-bold text-indigo-300 mb-1">ğŸ’¡ è¿›é˜¶è£…é€¼æŠ€å·§</div>
                            <div className="text-slate-300 leading-relaxed">
                                {activeTab === 'cmd' && "æŒ‰ä½ Shift + å³é”®ç‚¹å‡»æ–‡ä»¶å¤¹èƒŒæ™¯ï¼Œå¯ä»¥é€‰æ‹©â€œåœ¨æ­¤å¤„æ‰“å¼€ PowerShell çª—å£â€ã€‚"}
                                {activeTab === 'file' && "å°è¯•åœ¨åœ°å€æ è¾“å…¥ 'cmd' ç„¶åå›è½¦ï¼Œå¯ä»¥ç›´æ¥åœ¨è¿™ä¸ªç›®å½•æ‰“å¼€ç»ˆç«¯ã€‚"}
                                {activeTab === 'path' && "å¦‚æœä½ å¿…é¡»ç§»åŠ¨è½¯ä»¶ï¼Œè¯·ä½¿ç”¨ 'MKLINK' å‘½ä»¤åˆ›å»ºç¬¦å·é“¾æ¥ï¼Œéª—è¿‡ç³»ç»Ÿã€‚"}
                                {activeTab === 'driver' && "é©±åŠ¨å‡ºäº†é—®é¢˜ï¼Ÿå°è¯•è¿›å…¥â€œå®‰å…¨æ¨¡å¼â€ï¼Œé‚£é‡Œåªä¼šåŠ è½½æœ€åŸºæœ¬çš„é©±åŠ¨ï¼Œæ–¹ä¾¿æ’æŸ¥ã€‚"}
                                {activeTab === 'registry' && "æ°¸è¿œä¸è¦åœ¨æ²¡æœ‰å¤‡ä»½çš„æƒ…å†µä¸‹åˆ é™¤æ³¨å†Œè¡¨é”®å€¼ã€‚å¯ä»¥ä½¿ç”¨ 'å¯¼å‡º' åŠŸèƒ½å¤‡ä»½ã€‚"}
                                {activeTab === 'task' && "æŒ‰ Ctrl + Shift + Esc å¯ä»¥ç›´æ¥è°ƒå‡ºä»»åŠ¡ç®¡ç†å™¨ï¼Œæ¯” Ctrl+Alt+Del æ›´å¿«ã€‚"}
                                {activeTab === 'env' && "ä¿®æ”¹ç¯å¢ƒå˜é‡åï¼Œé€šå¸¸éœ€è¦é‡å¯ç»ˆç«¯ï¼ˆCMD/PSï¼‰æ‰ä¼šç”Ÿæ•ˆã€‚"}
                            </div>
                        </div>
                    </div>

                    <div className="flex-1 flex flex-col bg-[#0f172a] relative overflow-hidden">
                        <div className="absolute inset-0 z-0 opacity-10 pointer-events-none" 
                             style={{backgroundImage: 'radial-gradient(#475569 1px, transparent 1px)', backgroundSize: '20px 20px'}}>
                        </div>

                        <div className="p-8 pb-4 z-10">
                            <h2 className="text-3xl font-bold text-white mb-2">
                                {MENU_ITEMS.find(i => i.id === activeTab).title}
                            </h2>
                            <p className="text-slate-400">
                                {activeTab === 'cmd' && "å›¾å½¢ç•Œé¢é™åˆ¶äº†ä½ çš„æƒ³è±¡åŠ›ï¼Œå‘½ä»¤è¡Œæ‰æ˜¯çœŸæ­£çš„â€œä¸Šå¸æ¨¡å¼â€ã€‚"}
                                {activeTab === 'file' && "æ–‡ä»¶åˆ é™¤ä¸æ˜¯æ“¦é™¤æ•°æ®ï¼Œè€Œæ˜¯â€œé”€æˆ·â€ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ•°æ®èƒ½æ¢å¤ï¼Œä¹Ÿæ˜¯ä¸ºä»€ä¹ˆè¦†ç›–åå°±å®Œäº†ã€‚"}
                                {activeTab === 'path' && "ç³»ç»Ÿæ‰¾ä¸åˆ°æ–‡ä»¶ï¼Ÿé€šå¸¸ä¸æ˜¯æ–‡ä»¶ä¸¢äº†ï¼Œè€Œæ˜¯åœ°å›¾ï¼ˆè·¯å¾„ï¼‰ç”»é”™äº†ã€‚"}
                                {activeTab === 'driver' && "æ²¡æœ‰é©±åŠ¨ï¼Œä½ çš„ 4090 æ˜¾å¡å°±åªèƒ½å½“ç”µé£æ‰‡ç”¨ã€‚"}
                                {activeTab === 'registry' && "Windows çš„åŸºå› åº“ã€‚æ‰€æœ‰çš„è®¾ç½®å˜åŠ¨ï¼Œæœ€ç»ˆéƒ½ä¼šå†™åœ¨è¿™é‡Œã€‚"}
                                {activeTab === 'task' && "å½“ç”µè„‘å¡æ­»æ—¶ï¼Œè¿™é‡Œå°±æ˜¯ä½ çš„æ‰‹æœ¯å°ã€‚æ‰¾åˆ°ç—…ç¶ï¼Œåˆ‡é™¤å®ƒã€‚"}
                                {activeTab === 'env' && "ä¸ºä»€ä¹ˆè¾“å…¥ python ç”µè„‘å°±çŸ¥é“å»å“ªé‡Œæ‰¾ç¨‹åºï¼Ÿå…¨é è¿™ä¸ªâ€œé€šè®¯å½•â€ã€‚"}
                            </p>
                        </div>

                        <div className="flex-1 p-8 pt-0 z-10 overflow-hidden">
                            <div className="h-full bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-xl p-6 shadow-2xl overflow-y-auto relative">
                                {renderContent()}
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>